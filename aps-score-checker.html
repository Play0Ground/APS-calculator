<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>APS Score Checker</title>
  <!-- External Libraries -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/hover.css/2.3.1/css/hover-min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">
  <!-- Custom CSS for Loader -->
  <style>
    /* Loader CSS */
html, body {
  height: 100%;
  margin: 0;
}

.loader-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: none; /* Initially hidden */
  justify-content: center;
  align-items: center;
  background-color: rgba(0, 0, 0, 0); /* Semi-transparent background */
  z-index: 999;
}

.loader-box {
  width: 10vh;  /* Box width */
  height: 10vh; /* Box height */
  background-color: rgba(0, 0, 0, 0.238);  /* Background color of the box */
  border-radius: 20vh; /* Rounded corners */
  display: flex;
  justify-content: center;
  align-items: center;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2); /* Box shadow */
}

.loader {
  animation: rotate 1s infinite;
  height: 50px;
  width: 50px;
}

.loader:before,
.loader:after {   
  border-radius: 50%;
  content: '';
  display: block;
  height: 20px;
  width: 20px;
}

.loader:before {
  animation: ball1 1s infinite;
  background-color: #cb2025;
  box-shadow: 30px 0 0 #f8b334;
  margin-bottom: 10px;
}

.loader:after {
  animation: ball2 1s infinite;
  background-color: #00a096;
  box-shadow: 30px 0 0 #97bf0d;
}

@keyframes rotate {
  0% {
    transform: rotate(0deg) scale(0.8);
  }
  50% {
    transform: rotate(360deg) scale(1.2);
  }
  100% {
    transform: rotate(720deg) scale(0.8);
  }
}

@keyframes ball1 {
  0% {
    box-shadow: 30px 0 0 #f8b334;
  }
  50% {
    box-shadow: 0 0 0 #f8b334;
    margin-bottom: 0;
    transform: translate(15px, 15px);
  }
  100% {
    box-shadow: 30px 0 0 #f8b334;
    margin-bottom: 10px;
  }
}

@keyframes ball2 {
  0% {
    box-shadow: 30px 0 0 #97bf0d;
  }
  50% {
    box-shadow: 0 0 0 #97bf0d;
    margin-top: -20px;
    transform: translate(15px, 15px);
  }
  100% {
    box-shadow: 30px 0 0 #97bf0d;
    margin-top: 0;
  }
}


    /* Existing Styles */
    body {
      font-family: Arial, sans-serif;
      background-color: #f0f0f0;
    }

    .container {
      max-width: 90%;
      width: auto;
      margin: 50px auto;
      padding: 20px;
      background-color: #fff;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    h1 {
      text-align: center;
      color: #333;
    }

    .input-group {
      margin-bottom: 20px;
    }

    .input-group input[type="text"] {
      width: calc(100% - 30px);
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      outline: none;
    }

    .input-group button {
      padding: 8px;
      border: none;
      background-color: #007bff;
      color: #fff;
      border-radius: 5px;
      cursor: pointer;
      outline: none;
      margin-left: auto;
      margin-top: 5px;
    }

    .input-group button:last-child {
      background-color: #dc3545;
    }

    .result {
      background-color: #f7f7f7;
      padding: 20px;
      border-radius: 5px;
    }

    
/* Hover effect to highlight the qualification box */
.qualification:hover {
    transform: scale(1.02); /* Slightly enlarge the box on hover */
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15); /* Enhance shadow effect */
}

/* Main Qualification box */
.qualification {
    position: relative;
    margin-bottom: 10px;
    border-left: 2px solid #007bff;
    background-size: contain;
    background-repeat: no-repeat; /* No repeat on larger screens */
    background-position: center;
    opacity: 0.01; /* Slight transparency */
    transition: transform 0.3s ease, box-shadow 0.3s ease; /* Smooth hover effect */
    overflow: hidden; /* Keep content within the box */
}

/* Qualification content with additional styles */
.qualification-content {
    position: relative;
    z-index: 2; /* Content is above the background */
    padding: 20px;
    background-color: rgba(255, 255, 255, 0.9); /* Ensure content is readable */
    margin-bottom: 0px;
    border-radius: 10px;
    border: 1px solid rgba(0, 0, 0, 0.1); /* Visible border to divide boxes */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Subtle shadow */
    transition: transform 0.3s ease, box-shadow 0.3s ease; /* Smooth transition on hover */
}

/* Overlay for reduced opacity over the background logo */
.qualification::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(255, 255, 255, 0.244); /* White overlay for logo readability */
    z-index: 1; /* Place the overlay behind the content */
    background-size: contain; /* Ensure background logo fits inside box */
    background-position: center; /* Center the background logo */
    background-repeat: space; /* Allows space for repeats on smaller screens */
}

/* Text and other elements sit above the logo and white background */
.qualification-content > * {
    position: relative;
    z-index: 2; /* Ensure the text is on top */
}

/* Logo display styling (if you need to display a small logo separately) */
.qualification-logo {
    max-width: 100px; /* Limit logo size */
    max-height: 100px; /* Ensure the logo doesn't exceed a certain size */
    display: block;
    margin-bottom: 10px;
    margin: auto;
}

/* Media queries to ensure responsiveness */
@media only screen and (max-width: 768px) {
    .qualification {
    background-size: contain;
    background-repeat: space; /* No repeat on larger screens */
    background-position: center;
    }

    .qualification-content {
        padding: 15px;
        margin-bottom: 0px; /* Increase space between boxes on smaller screens */
    }

    .qualification-logo {
        max-width: 80px;
        max-height: 80px;
    }
}

@media only screen and (max-width: 480px) {
    .qualification {
    background-size: contain;
    background-repeat: space; /* No repeat on larger screens */
    background-position: center;
    }

    .qualification-content {
        padding: 10px;
        margin-bottom: 0px; /* Space adjustment for smaller screens */
    }

    .qualification-logo {
        max-width: 60px;
        max-height: 60px;
    }
}

/* Optional: Add keyframe animation to the qualification boxes */
@keyframes fadeInUp {
    0% {
        opacity: 0;
        transform: translateY(20px);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

.qualification {
    animation: fadeInUp 0.6s ease both; /* Applies the Animate.css fadeInUp effect */
}
.apply-button, .apply-for-you-button {
      text-align: left;
      margin-top: 20px;
}

    .apply-button button, .apply-for-you-button button {
      padding: 10px 20px;
      border: none;
      color: #fff;
      border-radius: 30px;
      cursor: pointer;
      outline: none;
      transition: all 0.3s ease;
    }

    .apply-button button {
      background-color: #4CAF50;
    }

    .apply-button button:hover {
      background-color: #39843d;
    } 
    
    .apply-button a {
      text-decoration: none;
      color: inherit;
    }

    .apply-for-you-button button {
      background-color: #007bff;
    }

    .apply-for-you-button button:hover {
      background-color: #0056b3;
    }

    @media only screen and (max-width: 786px) {
  .apply-for-you-button a {
    display: block;
    margin-bottom: 5px; /* Add vertical spacing between buttons */
  }

  .apply-for-you-button button {
    width: 100%; /* Make buttons full width for better mobile appearance */
  }
}
    .coded-by-button {
      text-align: center;
      margin-top: 20px;
    }

    .coded-by-button button {
      padding: 4px 10px;
      border: none;
      background-color: #007bff;
      color: #fff;
      border-radius: 15px;
      cursor: pointer;
      outline: none;
      transition: all 0.3s ease;
    }

    .coded-by-button button:hover {
      background-color: #0056b3;
    }

    .popup {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #fff;
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    }

    .close-btn-icon {
      position: sticky;
      top: 5px;
      left: 95%;
      background: none;
      border: none;
      font-size: 20px;
      color: #333;
      cursor: pointer;
      z-index: 1002;
    }

    .close-btn-icon:hover {
      color: #007bff;
    }

    .logo-container {
      display: flex;
      justify-content: center;
      align-items: center;
      max-width: 350px;
      max-height: 75px;
      margin: 0 auto;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      background-color: #92aecc5d;
    }

    .logo-container img {
      max-width: 100%;
      max-height: 100%;
      margin: 5px;
      object-fit: contain;
    }

    .coded-by-info-container {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-top: 20px;
    }

    .coded-by-info-container .coded-by-button {
      margin-right: 10px;
    }

    .coded-by-info-container .info-button {
      background-color: #20c300;
      color: #fff;
      border: none;
      border-radius: 8px;
      width: 30px;
      height: 30px;
      font-size: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background-color 0.3s ease;
      margin-left: 30px;
      margin-top: 18px;
    }

    .coded-by-info-container .info-button:hover {
      background-color: #499a54;
    }

    .info-button i {
      margin-top: 2px;
    }

    #infoPopup {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background-color: #fff;
  padding: 20px;
  border: 1px solid #ccc;
  border-radius: 5px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
  max-width: 70vw; /* Adjust the width relative to the viewport */
  width: 70vw;     /* Use 70% of the viewport width */
  max-height: 85vh; /* Adjust the height relative to the viewport */
  height: 85vh;    /* Use 85% of the viewport height */
  overflow-y: auto;
  z-index: 1001;
}

/* Media query for smaller devices */
@media only screen and (max-width: 768px) {
  #infoPopup {
    max-width: 80%; /* For smaller screens, increase width to 90% */
    width: 90%;     /* Use more of the viewport width */
    max-height: 70vh; /* Reduce height on smaller screens */
    height: 70vh;    /* Adjust the height to 70% */
  }
}
    .learn-more-button {
      text-align: center;
      margin: 20px 0;
    }

    .learn-more-button button {
      padding: 10px 20px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      transition: background-color 0.3s ease;
    }

    .learn-more-button button:hover {
      background-color: #45a049;
    }

    .close-btn, .close-btn1 {
      background-color: #dc3545;
      color: #fff;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      transition: background-color 0.3s ease;
      width: calc(100% - 10px);
    }

    .close-btn:hover, .close-btn1:hover {
      background-color: #c82333;
    }

    .thin-button {
      display: inline-block;
      padding: 2px 8px;
      border: 1px solid #7890aa;
      background-color: #627589;
      color: #fff;
      text-align: center;
      text-decoration: none;
      border-radius: 10px;
      font-size: 14px;
      transition: background-color 0.3s ease, border-color 0.3s ease;
    }

    .thin-button:hover {
      background-color: #0056b3;
      border-color: #0056b3;
    }

    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      display: none;
    }

    @media only screen and (max-width: 880px) {
      .input-group button {
        padding: 12px;
        font-size: 16px;
      }

    }

    @media only screen and (max-width: 480px) {
      .input-group button {
        padding: 10px;
        font-size: 15px;
      }

      .info-button {
        width: 35px;
        font-size: 18px;
      }

    
    }

    /* Style the Sort By Dropdown */
#sortByUniversity {
  padding: 10px;
  margin-bottom: 1rem;
  border-radius: 8px;
  background-color: #f1f1f1;
  border: 1px solid #ccc;
  font-size: 16px;
  color: #333;
  transition: background-color 0.3s ease, border-color 0.3s ease;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  outline: none;
}

#sortByUniversity:focus {
  background-color: #e2e2e2;
  border-color: #007bff;
  color: #007bff;
}

/* Hover Effect */
#sortByUniversity:hover {
  background-color: #e9ecef;
  border-color: #007bff;
}

/* Add animation to the result list (fades in with a slide-up effect) */
#qualificationList .qualification {
  animation: fadeInUp 0.6s ease both; /* Applies the Animate.css fadeInUp effect */
}

/* Define keyframes for fadeInUp animation */
@keyframes fadeInUp {
  0% {
    opacity: 0;
    transform: translateY(20px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Back to Top Button Styles */
.back-to-top-btn {
    position: fixed; /* Fixed position, stays in place while content scrolls */
    bottom: 20vh; /* Distance from the bottom of the screen */
    right: 3vh; /* Distance from the right side of the container */
    display: none; /* Hidden by default */
    background-color: #007bff; /* Button background color */
    color: white; /* Button text color */
    border: none; /* No border */
    border-radius: 50%; /* Circular button */
    width: 50px; /* Width of the button */
    height: 50px; /* Height of the button */
    font-size: 20px; /* Font size for the arrow icon */
    cursor: pointer; /* Hand cursor */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Subtle shadow */
    z-index: 1000; /* Ensure it stays on top of other content */
    transition: all 0.3s ease-in-out;
}

.back-to-top-btn:hover {
    background-color: #0056b3; /* Darken the button color on hover */
}
</style>

</head>
<body>
<div class="container">
  <div class="logo-container">
    <a href="https://applywithme.co.za" target="_blank">
      <img src="https://iili.io/JVwsKyG.png" alt="Welcome Image">
    </a>
  </div>
  <h1><b>APS Score Checker</b></h1>
  <div class="input-group">
    <input type="text" id="apsScore" placeholder="Enter your APS score (18-36)" onkeydown="if (event.keyCode === 13) checkQualification()">
    <div>
      <button onclick="checkQualification()">Check</button>
      <button onclick="clearInput()">Clear</button>
    </div>
  </div>
  
  <div class="result" id="resultArea" style="display: none;">
    <p><strong>You qualify for:</strong></p>
    <p><strong>Count:</strong> <span id="resultCount">0</span> Result(s)</p>
    <div>
      <label for="sortByUniversity">Sort by:</label>
      <select id="sortByUniversity" onchange="sortResults()">
        <option value="none">Select</option>
        <option value="universityAsc">University Name (A-Z)</option>
        <option value="universityDesc">University Name (Z-A)</option>
      
      </select>
      
    </div>
    <div id="qualificationList"></div>
  </div>

  <div class="coded-by-info-container">
    <div class="coded-by-button">
      Coded by: <a href="https://www.instagram.com/malepe_brilliant/" target="_blank"><button>Malepe Brilliant</button></a>
    </div>
    <button class="info-button" onclick="showInfo()">
      <i class="fas fa-info"></i>
    </button>
</div>

<div style="text-align: center; margin-top: 20px;">
    <i class="fa fa-copyright"></i> <span id="copyrightYear"></span> Apply With Me
</div>
    <!-- Back to Top Button -->
    <button id="backToTopBtn" class="back-to-top-btn" title="Go to top">
      <i class="fas fa-arrow-up"></i>
  </button>
</div> <!-- End of .container -->

</div>

<!-- Loader Animation -->
<div class="loader-container" id="loader">
  <div class="loader-box">
    <div class="loader"></div>
  </div>
</div>

<!-- Popups -->
<div class="popup" id="popup01">
  <p>Sorry, the results you are looking for are not available.</p>
  <button class="close-btn" onclick="closePopup('popup01')">Close</button>
</div>

<div class="popup" id="popup02">
  <p>Only numbers should be entered. Please enter a valid APS score.</p>
  <button class="close-btn" onclick="closePopup('popup02')">Close</button>
</div>

<div class="popup" id="popup03">
  <p>Please enter a number between 18 and 36.</p>
  <button class="close-btn" onclick="closePopup('popup03')">Close</button>
</div>

<div class="popup" id="infoPopup">
  <button class="close-btn-icon" onclick="closePopup('infoPopup')">
    <i class="fas fa-times"></i> <!-- Font Awesome "X" icon -->
  </button>
  
  <p><strong>Welcome to the APS Score Checker!</strong></p>
  <p>This app helps you check if you qualify for different university courses based on your APS score. Follow the instructions below to use the app effectively.</p>
  <p>You'll see the "Apply With Me" logo and the title "APS Score Checker." Clicking the logo will direct you to the <a href="https://applywithme.co.za" target="_blank" class="thin-button">Apply With Me</a> website.</p>

  <h3>Step 1: Enter Your APS Score</h3>
  <p>In the input field, type your APS score. This is the total score you get based on your school subjects. Your APS score should be a number between <strong>18 and 35</strong>.</p>

  <h3>Step 2: Check Your Qualification</h3>
  <p>Click the <strong>Check</strong> button after entering your APS score. The app will show the courses and qualifications you are eligible for based on your score.</p>
  <p>You’ll see the following details:</p>
  <ul>
    <li><strong>University Name</strong>: The name of the university offering the course.</li>
    <li><strong>Programme Name</strong>: The name of the course or program.</li>
    <li><strong>Campuses</strong>: Locations where the course is available.</li>
    <li><strong>Duration</strong>: How long the course will take (in years).</li>
    <li><strong>Subjects Required</strong>: The specific school subjects and levels needed to qualify for the course.</li>
    <li><strong>APS Score</strong>: The minimum APS score required for the course.</li>
    <li><strong>Further Studies</strong>: Any additional studies you can pursue after completing this program.</li>
    <li><strong>Career Options</strong>: Possible career paths you can follow after completing the course.</li>
  </ul>

  <h3>Note on Missing Information</h3>
<p>Sometimes, certain details like the University Name, Programme, Campuses, Duration, Subjects, Further Studies, or Career Options may not appear in the results. This happens when the relevant information for a particular course has not been added to our system. For example:</p>
<ul>
  <li>If the "Further Studies" section does not show, it means that information wasn't provided for that specific course.</li>
  <li>Similarly, if sections like "Career Options" or "Duration" are missing, it means that data is currently unavailable.</li>
</ul>
<p>This doesn’t mean the course is invalid; it simply indicates that some details might not be available at the moment.</p>

  <h3>Step 3: Understanding the Results</h3>
  <p>If your APS score qualifies you for a course, the results will show the university, course name, campuses, and other details. You can click the "Apply" button to go directly to the website of the university.</p>
  <p>There is also a <strong>"Let's apply for you"</strong> button that connects you to our team via WhatsApp. <strong>With years of experience in helping students navigate applications for universities, colleges, and other educational institutions</strong>, we are experts at making sure students get the best results. By using our service, <strong>your chances of success are significantly higher</strong> because we know exactly what institutions are looking for. We review your academic background and guide you to the programs that fit you best, ensuring that you’re applying to schools and courses where you're most likely to be accepted. Click on the WhatsApp links for more help and let us handle your application journey.</p>
  <p>Each entry also includes an <strong>Apply</strong> button that links directly to the university’s or college’s application portal. However, if you choose to apply by yourself, you will need to manage the entire process, from filling out forms to meeting deadlines. <strong>When you apply with us, you get professional guidance, expert advice, and personalized support, all of which increase your chances of acceptance at your desired institution.</strong></p>
  <p><strong>"Let's Apply for You" Buttons:</strong> These buttons, with WhatsApp links, open in new tabs and connect you to our services where we assist with all types of school-related applications—whether it’s university, college, or other educational programs. We help secondary school students and anyone looking to advance their education find the right fit and apply with confidence. <strong>Apply With Me - We make the impossible possible.</strong> If you're ready to give yourself the best possible chance, let us apply for you.</p>
  <div class="learn-more-button">
    <a href="https://applywithme.co.za/about-us" target="_blank">
      <button>Learn more about our services</button>
    </a>
  </div>
  
  <h3>Important Note: APS Score and Subject Levels</h3>
<p>While your APS score is important, your subject levels also play a critical role in determining whether you qualify for a course. Be mindful of the following:</p>
<ul>
  <li>Even if your APS score is high (e.g., 28 or 35), you may not qualify for certain courses if your subject levels do not meet the specific requirements set by the institution. For example:
    <ul>
      <li>A course might require Mathematics at Level 3. If you have Mathematics at Level 2, you will not qualify, even if your APS score is 28 or higher.</li>
    </ul>
  </li>
  <li>You can apply for courses with a lower APS requirement (e.g., a course requiring an APS of 20) even if your score is higher (e.g., 25, 28, or 35), but your subject levels must still meet the required standards for the course.</li>
  <li><b>Make sure to review both your APS score and your subject levels to ensure you qualify for a specific course. In some cases, a higher APS score combined with strong subject levels increases your chances of being considered for competitive programs.</b></li>
  <li>There are instances where a student’s APS score may be lower, but if their subject levels in key areas like Mathematics, Physical Sciences, Life Sciences, Accounting, Tourism, Economics Studies, Computer Application Technology (CAT) or History are higher than required, they may still be considered for admission. For example:
    <ul>
      <li>A course may require Mathematics Level 4 and Physical Sciences Level 4. Even if your APS score is slightly below the required threshold, you may still be considered if you meet or exceed the subject level requirements.</li>
    </ul>
  </li>
</ul>

  <h3>What If There Are No Matching Courses?</h3>
  <p>If there are no courses that match your APS score, you’ll see a message saying, "Sorry, the results you are looking for are not available." This could happen if your APS score is not high enough for the courses in our system.</p>

  <h3>Error Messages</h3>
  <p>If you enter a score outside the 18-35 range or if the input is not a number, an error message will appear asking you to enter a valid APS score.</p>

  <h3>Clearing the Input</h3>
  <p>Click the <strong>Clear</strong> button to erase the score you entered and hide the results. You can then enter a new score.</p>
<div id="overlay">

  <p>Find the link to the developer’s Instagram in the bottom right corner.</p>
  
    <button class="close-btn1" onclick="closePopup('infoPopup')">Close</button>
</div>

<!-- Scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

<script>
  // Initialize AOS (Animate On Scroll library)
  AOS.init();

  // URL of the Google Apps Script web app that fetches data from Google Sheets
  const scriptUrl = 'https://script.google.com/macros/s/AKfycbxyr6sT5oyvt1m4czQsNsQJh7PdhYYwjBzfjfK22vsEbimXGNQK9JrtJ0yPB0FlGL49CA/exec';
  let qualifications = []; // Array to store qualifications data

  // Function to show the loader animation
  function showLoader() {
    document.getElementById('loader').style.display = 'flex';
  }

  // Function to hide the loader animation
  function hideLoader() {
    document.getElementById('loader').style.display = 'none';
  }

  // Function to hide all popups and the overlay
  function hideAllPopups() {
    document.querySelectorAll('.popup').forEach(popup => popup.style.display = 'none');
    document.getElementById('overlay').style.display = 'none';
  }

  // Function to update the result count display
  function updateResultCount(count) {
    document.getElementById('resultCount').textContent = count;
  }

 
// Function to check qualifications based on the entered APS score
function checkQualification() {
    hideAllPopups(); // Hide any existing popups
    showLoader();  // Show the loader when the check begins

    const apsScore = document.getElementById('apsScore').value;

    // Validate that the input is a number and not empty
    if (isNaN(apsScore) || apsScore.trim() === '') {
        hideLoader();  // Hide the loader if validation fails
        document.getElementById('popup02').style.display = 'block'; // Show error popup
        return;
    }

    const aps = parseInt(apsScore, 10);
    // Validate that the APS score is within the acceptable range
    if (aps < 18 || aps > 36) {
        hideLoader();  // Hide the loader if validation fails
        document.getElementById('popup03').style.display = 'block'; // Show error popup
        return;
    }

    // Fetch results from the server using the exact APS score
    fetch(`${scriptUrl}?apsScore=${aps}`)  // Pass the exact APS score to the server
        .then(response => response.json())
        .then(data => {
            // Display the results exactly as returned by the server
            qualifications = data;  // Store qualifications data for sorting
            displayResults(data);   // Display the results
            hideLoader();  // Hide the loader once data is fetched and displayed
        })
        .catch(error => {
            hideLoader();  // Hide the loader if an error occurs
            console.error('Error fetching data:', error);
        });
}


  // Function to display the results
  function displayResults(data) {
    const resultArea = document.getElementById('resultArea');
    const qualificationList = document.getElementById('qualificationList');
    
    // Clear the qualification list for new results
    qualificationList.innerHTML = '';

    // Check if there are results to display
    if (data.length > 0) {
      updateResultCount(data.length); // Update the result count display

      // Loop through each qualification item in the data array
      data.forEach(item => {
        const qualificationDiv = document.createElement('div');
        qualificationDiv.className = 'qualification';
        
        // Set the logo as a background image if provided
        if (item.Logo) {
          qualificationDiv.style.backgroundImage = `url(${item.Logo})`;
        }

        // Initialize an empty string to hold the inner HTML for the qualification content
        let contentHTML = '<div class="qualification-content">';

        // Add University name if available
        if (item.University) {
          contentHTML += `<p><strong>University:</strong> ${item.University}</p>`;
        }

        // Add Programme name if available
        if (item.Programme) {
          contentHTML += `<p><strong>Programme:</strong> ${item.Programme}</p>`;
        }

        // Add Campuses if available
        if (item.Campuses) {
          contentHTML += `<p><strong>Campuses:</strong> ${item.Campuses}</p>`;
        }

        // Add Duration if available
        if (item.Duration) {
          contentHTML += `<p><strong>Duration:</strong> ${item.Duration} <strong>Years</strong></p>`;
        }

        // Add Subjects if available
        if (item.Subjects) {
          contentHTML += `<p><strong>Subjects:</strong> ${item.Subjects}</p>`;
        }

        // Add APS Score if available
        if (item['APS Score']) {
          contentHTML += `<p><strong>APS Score:</strong> ${item['APS Score']}</p>`;
        }

        // Add Further Studies section if available and split it into a list
        if (item['Further Studies']) {
          contentHTML += `<p><strong>Further Studies:</strong></p><ul>${item['Further Studies'].split(',').map(option => `<li>${option.trim()}</li>`).join('')}</ul>`;
        }

        // Add Career Options section if available and split it into a list
        if (item['Career Options']) {
          contentHTML += `<p><strong>Career Options:</strong></p><ul>${item['Career Options'].split(',').map(option => `<li>${option.trim()}</li>`).join('')}</ul>`;
        }

// Add "Let's apply for you" buttons with WhatsApp links and custom message
contentHTML += `
  <div class="apply-for-you-button">
    <a href="https://wa.me/27726171976?text=Hello%20*APPLY%20WITH%20ME*,%20I%20am%20interested%20in%20your%20application%20services.%20I%20would%20like%20to%20use%20your%20services%20to%20apply%20to:%0A%0A•%20*${encodeURIComponent(item.University)}*%0A•%20*${encodeURIComponent(item.Programme)}*%0A•%20APS%20Score:%20*${encodeURIComponent(item['APS Score'])}*%0A%0APlease%20provide%20the%20next%20steps%20for%20proceeding%20with%20the%20application.%0A%0AFor%20more%20information,%20visit%20applywithme.co.za%0A*We%20Make%20The%20Impossible%20Possible.*" target="_blank" class="whatsapp-link">
      <button>Let's apply for you (WhatsApp 1)</button>
    </a>
    <a href="https://wa.me/27663645075?text=Hello%20*APPLY%20WITH%20ME*,%20I%20am%20interested%20in%20your%20application%20services.%20I%20would%20like%20to%20use%20your%20services%20to%20apply%20to:%0A%0A•%20*${encodeURIComponent(item.University)}*%0A•%20*${encodeURIComponent(item.Programme)}*%0A•%20APS%20Score:%20*${encodeURIComponent(item['APS Score'])}*%0A%0APlease%20provide%20the%20next%20steps%20for%20proceeding%20with%20the%20application.%0A%0AFor%20more%20information,%20visit%20applywithme.co.za%0A*We%20Make%20The%20Impossible%20Possible.*" target="_blank" class="whatsapp-link">
      <button>Let's apply for you (WhatsApp 2)</button>
    </a>
  </div>`;


        // Add "Apply Now" button with external application link
        if (item['Apply Link']) {
          contentHTML += `
            <div class="apply-button">
              <button><a href="${item['Apply Link']}" target="_blank">Apply Now</a></button>
            </div>`;
        }

        // Close the qualification-content div
        contentHTML += '</div>';

        // Append the generated content to the qualification div
        qualificationDiv.innerHTML = contentHTML;

        // Append the qualification div to the qualification list
        qualificationList.appendChild(qualificationDiv);
      });

      // Show the result area
      resultArea.style.display = 'block';

    } else {
      // No results found, show a popup with an appropriate message
      updateResultCount(0);
      document.getElementById('popup01').style.display = 'block';
    }
  }

  // Sorting function to sort the results based on user's selection
  function sortResults() {
    const sortBy = document.getElementById('sortByUniversity').value;

    switch (sortBy) {
      case 'universityAsc':
        // Sort by University Name (A-Z)
        qualifications.sort((a, b) => a.University.localeCompare(b.University));
        break;
      case 'universityDesc':
        // Sort by University Name (Z-A)
        qualifications.sort((a, b) => b.University.localeCompare(a.University));
        break;
      case 'apsAsc':
        // Sort by APS Score (Ascending)
        qualifications.sort((a, b) => a['APS Score'] - b['APS Score']);
        break;
      case 'apsDesc':
        // Sort by APS Score (Descending)
        qualifications.sort((a, b) => b['APS Score'] - a['APS Score']);
        break;
      default:
        return;  // If 'none' is selected, do nothing
    }

    // After sorting, display the results again
    displayResults(qualifications);
  }

  // Function to clear the input and reset the result area
  function clearInput() {
    document.getElementById('apsScore').value = '';
    document.getElementById('resultArea').style.display = 'none';
    document.getElementById('qualificationList').innerHTML = '';
  }

  // Function to close a specific popup
  function closePopup(popupId) {
    document.getElementById(popupId).style.display = 'none';
    document.getElementById('overlay').style.display = 'none';
  }

  // Function to show the information popup
  function showInfo() {
    document.getElementById('infoPopup').style.display = 'block';
    document.getElementById('overlay').style.display = 'block';
  }

  // Event listener to hide all popups when the overlay is clicked
  document.getElementById('overlay').addEventListener('click', hideAllPopups);

  // Event listener to update the copyright year on page load
  document.addEventListener('DOMContentLoaded', () => {
  // 1. Put the current year in the footer
  document.getElementById('copyrightYear').textContent 
      = new Date().getFullYear();

  // 2. Check if there's a "?score=" in the URL
  const urlParams = new URLSearchParams(window.location.search);
  const passedScore = urlParams.get('score');

  if (passedScore) {
    // Put that score in the #apsScore input
    document.getElementById('apsScore').value = passedScore;

    // OPTIONAL: automatically run checkQualification() 
    // so the user sees the results right away.
    // If you want them to have to click "Check," then remove this call.
    // checkQualification();
  }
});


  // Get the "Back to Top" button
  const backToTopBtn = document.getElementById('backToTopBtn');

  // Listen for scroll events to show or hide the "Back to Top" button
  window.addEventListener('scroll', function() {
      // Show the button when scrolled down more than 800px
      if (window.scrollY > 800) {
          backToTopBtn.style.display = 'block';
      } else {
          backToTopBtn.style.display = 'none';
      }
  });

  // Scroll back to the top when the "Back to Top" button is clicked
  backToTopBtn.addEventListener('click', function() {
      window.scrollTo({
          top: 0,
          behavior: 'smooth' // Smooth scrolling effect
      });
  });

  // Function to close popups when clicking outside of them
  document.addEventListener('click', function(event) {
      const overlay = document.getElementById('overlay');
      const popupElements = document.querySelectorAll('.popup');

      popupElements.forEach(popup => {
          if (event.target === overlay) {
              popup.style.display = 'none';
              overlay.style.display = 'none';
          }
      });
  });
</script>

</body>
</html>
